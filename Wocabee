import random
import csv

# Funktion zum Laden der Vokabeln aus einer CSV-Datei
def load_vocab(filename):
    vocab = {}
    try:
        with open(filename, newline='', encoding='utf-8') as csvfile:
            reader = csv.reader(csvfile)
            for row in reader:
                if len(row) == 2:
                    vocab[row[0].strip()] = row[1].strip()
    except FileNotFoundError:
        print("Keine Vokabeldatei gefunden. Erstelle eine neue Datei.")
    return vocab

# Funktion zum Speichern neuer Vokabeln
def save_vocab(filename, vocab):
    with open(filename, 'w', newline='', encoding='utf-8') as csvfile:
        writer = csv.writer(csvfile)
        for word, translation in vocab.items():
            writer.writerow([word, translation])

# Funktion für das Vokabel-Quiz
def quiz(vocab):
    words = list(vocab.keys())
    random.shuffle(words)
    score = 0
    
    for word in words:
        answer = input(f"Was ist die Übersetzung von '{word}'? ")
        if answer.strip().lower() == vocab[word].lower():
            print("✅ Richtig!")
            score += 1
        else:
            print(f"❌ Falsch! Die richtige Antwort ist: {vocab[word]}")
    
    print(f"Dein Endergebnis: {score} von {len(vocab)} richtig!")

# Funktion zur Anzeige aller Vokabeln
def show_vocab(vocab):
    if vocab:
        print("\nGespeicherte Vokabeln:")
        for word, translation in vocab.items():
            print(f"{word} - {translation}")
    else:
        print("Keine Vokabeln vorhanden!")

# Funktion zum Löschen einer Vokabel
def delete_vocab(filename, vocab):
    word = input("Welche Vokabel möchtest du löschen? ")
    if word in vocab:
        del vocab[word]
        save_vocab(filename, vocab)
        print(f"✅ '{word}' wurde gelöscht!")
    else:
        print("❌ Diese Vokabel existiert nicht!")

# Hauptmenü
def main():
    filename = "vocab.csv"
    vocab = load_vocab(filename)
    
    while True:
        print("\n1. Vokabeln lernen\n2. Neue Vokabeln hinzufügen\n3. Alle Vokabeln anzeigen\n4. Vokabel löschen\n5. Beenden")
        choice = input("Wähle eine Option: ")
        
        if choice == "1":
            if vocab:
                quiz(vocab)
            else:
                print("Es gibt noch keine Vokabeln!")
        elif choice == "2":
            word = input("Gib ein neues Wort ein: ")
            translation = input(f"Gib die Übersetzung für '{word}' ein: ")
            vocab[word] = translation
            save_vocab(filename, vocab)
            print("✅ Vokabel gespeichert!")
        elif choice == "3":
            show_vocab(vocab)
        elif choice == "4":
            delete_vocab(filename, vocab)
        elif choice == "5":
            print("Programm beendet.")
            break
        else:
            print("Ungültige Eingabe. Bitte versuche es erneut.")

if __name__ == "__main__":
    main()
